// αƒ™αƒαƒ£αƒ­αƒ”αƒ‘αƒ
import { useEffect } from "react";
import { useState, createContext } from "react";
import { useNavigate } from "react-router";
import { toast } from "react-toastify";
import io from "socket.io-client"

// αƒ™αƒαƒαƒΆαƒ”αƒ¥αƒ΅αƒΆαƒ (αƒ¥αƒ΅αƒ”αƒαƒαƒ΅ αƒ¨αƒ”αƒ¥αƒ›αƒαƒ)
export const AuthContext = createContext();

// αƒ΅αƒ”αƒ αƒ•αƒ”αƒ αƒαƒ΅ αƒ›αƒαƒ΅αƒαƒ›αƒαƒ αƒ—αƒ
const API_URL = import.meta.env.VITE_API_URL + "/api";

// αƒ›αƒαƒαƒ¨αƒ•αƒαƒ”αƒαƒαƒ‘αƒ”αƒ‘αƒαƒ΅αƒ αƒ“αƒ αƒ¤αƒ£αƒαƒ¥αƒαƒαƒ”αƒ‘αƒαƒ΅ αƒ›αƒαƒ›αƒ¬αƒαƒ“αƒ”αƒ‘αƒ”αƒαƒ
export const AuthProvider = ({children}) => {
    // αƒαƒ•αƒΆαƒαƒ αƒαƒ–αƒαƒαƒαƒαƒ΅ αƒ¨αƒ”αƒ“αƒ”αƒ’αƒαƒ“ αƒ›αƒαƒ¦αƒ”αƒ‘αƒ£αƒαƒ αƒ›αƒαƒαƒαƒαƒ”αƒ›αƒ”αƒ‘αƒαƒ΅ αƒ¨αƒ”αƒ΅αƒαƒαƒαƒ®αƒαƒ“ (αƒ›αƒ“αƒ’αƒαƒ›αƒαƒ αƒ”αƒαƒ‘αƒ)
    const [user, setUser] = useState(null);

    // αƒ›αƒ”αƒ¥αƒαƒαƒαƒ™αƒ£αƒ αƒαƒ“ re-render
    const [version, setVersion] = useState(0);


    // αƒ΅αƒ®αƒ•αƒαƒ“αƒαƒ΅αƒ®αƒ•αƒ αƒ’αƒ•αƒ”αƒ αƒ“αƒ–αƒ” αƒ›αƒ”αƒ¥αƒαƒ9αƒαƒ™αƒ£αƒ αƒαƒ“ αƒ’αƒαƒ“αƒαƒ΅αƒαƒ΅αƒ•αƒαƒ”αƒαƒαƒ“
    const navigate = useNavigate();

    // αƒ αƒαƒ“αƒ”αƒ΅αƒαƒ αƒαƒ“αƒαƒ›αƒαƒαƒαƒ αƒαƒαƒ αƒ•αƒ”αƒαƒαƒ“ αƒ¨αƒ”αƒ›αƒαƒ“αƒαƒ΅ αƒ΅αƒαƒαƒΆαƒ–αƒ”, αƒ”αƒ’αƒ αƒ”αƒ•αƒ” αƒ•αƒαƒ“αƒαƒαƒαƒ‘αƒ— αƒαƒ•αƒΆαƒαƒ αƒαƒ–αƒαƒαƒαƒαƒ΅ cookies αƒ’αƒαƒ›αƒαƒ§αƒ”αƒαƒ”αƒ‘αƒαƒ—
    useEffect(() => {
        checkAuth();
    }, []);

    useEffect(() => {
        if (!user) return;

        const socket = io(import.meta.env.VITE_API_URL);
        socket.emit('join', user._id || "Guest");

        socket.on('friendRequestReceived', ({ from, message }) => {
            toast.info(`${message} ${from.fullname}αƒ΅αƒαƒ’αƒαƒ`);
            setVersion(prev => prev + 1); // π” Trigger re-render
        });

        socket.on('friendRequestRejected', ({ from, message }) => {
            toast.info(`${message} ${from.fullname}αƒ΅αƒαƒ’αƒαƒ`);
            setVersion(prev => prev + 1); // π” Trigger re-render
        });

        socket.on('friendRequestAccepted', ({ from, message }) => {
            toast.info(`${message} ${from.fullname}αƒ΅αƒαƒ’αƒαƒ`);
            setVersion(prev => prev + 1); // π” Trigger re-render
        });

        socket.on('friendRemoved', ({ from, message }) => {
            toast.info(`${message} ${from.fullname}αƒ΅αƒαƒ’αƒαƒ`);
            setVersion(prev => prev + 1); // π” Trigger re-render
        });


        return () => {
            socket.disconnect();
        };
    }, [user]);


    const checkAuth = async () => {
        try {
            // αƒ•αƒαƒ™αƒ”αƒ—αƒ”αƒ‘αƒ— GET αƒ›αƒαƒ—αƒ®αƒαƒ•αƒαƒαƒ΅ API-αƒαƒ΅ αƒ¨αƒ”αƒ΅αƒαƒ‘αƒαƒ›αƒαƒ΅ αƒ”αƒαƒ“αƒαƒαƒαƒαƒΆαƒ–αƒ”
            const response = await fetch(`${API_URL}/user/my-profile`, {
                method: "GET", // αƒ›αƒαƒ—αƒ®αƒαƒ•αƒαƒαƒ΅ αƒ›αƒ”αƒ—αƒαƒ“αƒ - GET
                credentials: "include", // αƒ•αƒαƒ’αƒ–αƒαƒ•αƒαƒαƒ— cookie
            });

            // αƒαƒαƒ΅αƒ£αƒ®αƒ΅ αƒ•αƒ—αƒαƒ αƒ’αƒ›αƒαƒαƒ— JSON_αƒ“αƒαƒ αƒ›αƒαƒαƒ¨αƒ•αƒαƒ”αƒαƒαƒ‘αƒαƒ΅ αƒ¤αƒαƒ αƒ›αƒαƒΆαƒ¨αƒ
            const data = await response.json();

            // αƒ•αƒαƒ›αƒαƒ¬αƒ›αƒ”αƒ‘αƒ— αƒαƒαƒ΅αƒ£αƒ®αƒ΅, αƒαƒ§αƒ αƒ—αƒ£ αƒαƒ αƒ αƒ›αƒαƒ—αƒ®αƒαƒ•αƒαƒ αƒ¬αƒαƒ αƒ›αƒαƒΆαƒ”αƒ‘αƒ£αƒαƒ
            if (!response.ok) {
                // αƒ—αƒ£ αƒαƒαƒ΅αƒ£αƒ®αƒ αƒαƒ  αƒαƒ αƒαƒ΅ αƒ¬αƒαƒ αƒ›αƒαƒΆαƒ”αƒ‘αƒ£αƒαƒ, αƒ•αƒ§αƒ αƒαƒ— αƒ¨αƒ”αƒαƒ“αƒαƒ›αƒ
                throw new Error(`αƒαƒ•αƒΆαƒαƒ›αƒαƒΆαƒ£αƒ αƒ αƒαƒ•αƒΆαƒαƒ αƒαƒ–αƒαƒαƒαƒ αƒ¬αƒαƒ αƒ£αƒ›αƒαƒΆαƒ”αƒ‘αƒαƒαƒ“ αƒ“αƒαƒ΅αƒ αƒ£αƒαƒ“αƒ: ${data} ${response.status}`);
            }

            console.log("αƒαƒ•αƒΆαƒαƒ αƒαƒ–αƒαƒαƒαƒ αƒ¬αƒαƒ αƒ›αƒαƒΆαƒ”αƒ‘αƒαƒ— αƒ“αƒαƒ΅αƒ αƒ£αƒαƒ“αƒ", data);

            // αƒ¬αƒαƒ αƒ›αƒαƒΆαƒ”αƒ‘αƒαƒΆ αƒ“αƒαƒ΅αƒ αƒ£αƒαƒ”αƒ‘αƒαƒ΅ αƒ¨αƒ”αƒ›αƒΆαƒ®αƒ•αƒ”αƒ•αƒαƒ¨αƒ, αƒ•αƒαƒαƒαƒ­αƒ”αƒ‘αƒΆ αƒ“αƒαƒ‘αƒ αƒ£αƒαƒ”αƒ‘αƒ£αƒ αƒ›αƒαƒαƒαƒαƒ”αƒ›αƒ”αƒ‘αƒ΅ user αƒ’αƒαƒαƒ‘αƒαƒαƒ£αƒ  αƒ›αƒ“αƒ’αƒαƒ›αƒαƒ αƒ”αƒαƒ‘αƒαƒ΅
            setUser(data);

            // αƒ’αƒαƒ“αƒαƒ’αƒ•αƒ§αƒαƒ•αƒ΅ αƒ›αƒαƒ›αƒ®αƒ›αƒαƒ αƒ”αƒ‘αƒ”αƒαƒ αƒαƒ αƒαƒ¤αƒαƒαƒαƒ΅ αƒ’αƒ•αƒ”αƒ αƒ“αƒ–αƒ”
            navigate("/profile");
        } catch (err) {
            // αƒ¨αƒ”αƒαƒ“αƒαƒ›αƒαƒ΅ αƒ¨αƒ”αƒ›αƒ—αƒ®αƒ•αƒ”αƒ•αƒαƒ¨αƒ αƒ•αƒ‘αƒ”αƒ­αƒ“αƒαƒ•αƒ— αƒ™αƒαƒαƒ΅αƒαƒαƒ¨αƒ αƒαƒαƒ¤αƒαƒ αƒ›αƒαƒαƒαƒαƒ΅
            console.error("αƒ αƒ”αƒ’αƒαƒ΅αƒΆαƒ αƒαƒαƒαƒαƒ΅ αƒ¨αƒ”αƒαƒ“αƒαƒ›αƒ:", err);
        }
    }

    // αƒ•αƒ¥αƒ›αƒαƒαƒ— αƒαƒ΅αƒαƒαƒ¥αƒ αƒαƒαƒ£αƒ αƒ αƒ”αƒ’αƒαƒ΅αƒΆαƒ αƒαƒαƒαƒαƒ΅ αƒ¤αƒ£αƒαƒ¥αƒαƒαƒαƒ΅, αƒ αƒαƒ›αƒ”αƒαƒαƒ αƒαƒ¦αƒ”αƒ‘αƒ΅ αƒ αƒ”αƒ’αƒαƒ΅αƒΆαƒ αƒαƒαƒαƒαƒ΅ αƒ›αƒαƒαƒαƒαƒ”αƒ›αƒ”αƒ‘αƒ΅
    const register = async (registerData) => {
        try {
            // αƒ•αƒαƒ™αƒ”αƒ—αƒ”αƒ‘αƒ— POST αƒ›αƒαƒ—αƒ®αƒαƒ•αƒαƒαƒ΅ API-αƒαƒ΅ αƒ¨αƒ”αƒ΅αƒαƒ‘αƒαƒ›αƒαƒ΅ αƒ”αƒαƒ“αƒαƒαƒαƒαƒΆαƒ–αƒ”
            const response = await fetch(`${API_URL}/user/register`, {
                method: "POST", // αƒ›αƒαƒ—αƒ®αƒαƒ•αƒαƒαƒ΅ αƒ›αƒ”αƒ—αƒαƒ“αƒ - POST
                headers: {
                    "Content-Type": "application/json" // αƒ•αƒ£αƒ—αƒαƒ—αƒ”αƒ‘αƒ—, αƒ αƒαƒ› αƒ›αƒαƒαƒαƒαƒ”αƒ›αƒ”αƒ‘αƒ αƒαƒ αƒαƒ΅ JSON αƒ¤αƒαƒ αƒ›αƒαƒΆαƒ¨αƒ
                },
                // αƒ›αƒαƒαƒαƒαƒ”αƒ›αƒ”αƒ‘αƒ΅ αƒ’αƒαƒ αƒ“αƒαƒ•αƒ¥αƒ›αƒαƒαƒ— JSON-αƒαƒ“ body-αƒ¨αƒ
                body: JSON.stringify(registerData)
            });

            // αƒαƒαƒ΅αƒ£αƒ®αƒ΅ αƒ•αƒ—αƒαƒ αƒ’αƒ›αƒαƒαƒ— JSON_αƒ“αƒαƒ αƒ›αƒαƒαƒ¨αƒ•αƒαƒ”αƒαƒαƒ‘αƒαƒ΅ αƒ¤αƒαƒ αƒ›αƒαƒΆαƒ¨αƒ
            const data = await response.json();

            // αƒ•αƒαƒ›αƒαƒ¬αƒ›αƒ”αƒ‘αƒ— αƒαƒαƒ΅αƒ£αƒ®αƒ΅, αƒαƒ§αƒ αƒ—αƒ£ αƒαƒ αƒ αƒ›αƒαƒ—αƒ®αƒαƒ•αƒαƒ αƒ¬αƒαƒ αƒ›αƒαƒΆαƒ”αƒ‘αƒ£αƒαƒ
            if (!response.ok) {
                // αƒ—αƒ£ αƒαƒαƒ΅αƒ£αƒ®αƒ αƒαƒ  αƒαƒ αƒαƒ΅ αƒ¬αƒαƒ αƒ›αƒαƒΆαƒ”αƒ‘αƒ£αƒαƒ, αƒ•αƒ§αƒ αƒαƒ— αƒ¨αƒ”αƒαƒ“αƒαƒ›αƒ
                throw new Error(`αƒ αƒ”αƒ’αƒαƒ΅αƒΆαƒ αƒαƒαƒαƒ αƒ¬αƒαƒ αƒ£αƒ›αƒαƒΆαƒ”αƒ‘αƒαƒαƒ“ αƒ“αƒαƒ΅αƒ αƒ£αƒαƒ“αƒ: ${data} ${response.status}`);
            }

            // αƒαƒ¥ αƒ¨αƒ”αƒαƒ«αƒαƒ”αƒ‘αƒ αƒ›αƒαƒ•αƒαƒ®αƒ“αƒαƒαƒαƒ— αƒ αƒαƒαƒ›αƒ” αƒ“αƒαƒ›αƒαƒΆαƒ”αƒ‘αƒαƒ—αƒ αƒαƒαƒ’αƒαƒ™αƒ αƒ αƒ”αƒ’αƒαƒ΅αƒΆαƒ αƒαƒαƒαƒαƒ΅ αƒ¬αƒαƒ αƒ›αƒαƒΆαƒ”αƒ‘αƒαƒ΅ αƒ¨αƒ”αƒ›αƒ—αƒ®αƒ•αƒ”αƒ•αƒαƒ¨αƒ
            // console.log("αƒ αƒ”αƒ’αƒαƒ΅αƒΆαƒ αƒαƒαƒαƒ αƒ¬αƒαƒ αƒ›αƒαƒΆαƒ”αƒ‘αƒαƒ— αƒ“αƒαƒ΅αƒ αƒ£αƒαƒ“αƒ", data);

            // αƒ’αƒαƒ“αƒαƒ’αƒ•αƒ§αƒαƒ•αƒ΅ αƒαƒ•αƒΆαƒαƒ›αƒαƒΆαƒ£αƒ αƒαƒ“ Login αƒ’αƒ•αƒ”αƒ αƒ“αƒ–αƒ”
            navigate("/login");

            // αƒ’αƒαƒ›αƒαƒ’αƒ•αƒαƒ¥αƒ•αƒ΅ αƒ¬αƒαƒ αƒ›αƒαƒΆαƒ”αƒ‘αƒαƒ΅ αƒ›αƒ”αƒ΅αƒαƒ―αƒ
            toast.success(data);
        } catch (err) {
            // αƒ¨αƒ”αƒαƒ“αƒαƒ›αƒαƒ΅ αƒ¨αƒ”αƒ›αƒ—αƒ®αƒ•αƒ”αƒ•αƒαƒ¨αƒ αƒ’αƒαƒ›αƒαƒ’αƒ•αƒαƒ¥αƒ•αƒ΅ αƒαƒαƒ¤αƒαƒ αƒ›αƒαƒαƒαƒ αƒ™αƒαƒαƒΆαƒαƒαƒαƒ”αƒ αƒ¨αƒ
            toast.error(err.message);
        }
    };

    // αƒ•αƒ¥αƒ›αƒαƒαƒ— αƒαƒ΅αƒ£αƒαƒ¥αƒ αƒαƒαƒ£αƒ αƒαƒ•αƒΆαƒαƒ αƒαƒ–αƒαƒαƒαƒαƒ΅ αƒ¤αƒ£αƒαƒ¥αƒαƒαƒαƒ΅, αƒ αƒαƒ›αƒ”αƒαƒαƒ αƒαƒ¦αƒ”αƒ‘αƒ΅ αƒαƒ•αƒΆαƒαƒ αƒαƒ–αƒαƒαƒαƒαƒ΅ αƒ›αƒαƒαƒαƒαƒ”αƒ›αƒ”αƒ‘αƒ΅
    const login = async (loginData) => {
        try {
            // αƒ•αƒαƒ™αƒ”αƒ—αƒ”αƒ‘αƒ— POST αƒ›αƒαƒ—αƒ®αƒαƒ•αƒαƒαƒ΅ API-αƒαƒ΅ αƒ¨αƒ”αƒ΅αƒαƒ‘αƒαƒ›αƒαƒ΅ αƒ”αƒαƒ“αƒαƒαƒαƒαƒΆαƒ–αƒ”
            const response = await fetch(`${API_URL}/user/login`, {
                method: "POST", // αƒ›αƒαƒ—αƒ®αƒαƒ•αƒαƒαƒ΅ αƒ›αƒ”αƒ—αƒαƒ“αƒ - POST
                headers: {
                    "Content-Type": "application/json" // αƒ•αƒ£αƒ—αƒαƒ—αƒ”αƒ‘αƒ—, αƒ αƒαƒ› αƒ›αƒαƒαƒαƒαƒ”αƒ›αƒ”αƒ‘αƒ αƒαƒ αƒαƒ΅ JSON αƒ¤αƒαƒ αƒ›αƒαƒΆαƒ¨αƒ
                },
                // αƒ›αƒαƒαƒαƒαƒ”αƒ›αƒ”αƒ‘αƒ΅ αƒ’αƒαƒ αƒ“αƒαƒ•αƒ¥αƒ›αƒαƒαƒ— JSON-αƒαƒ“ body-αƒ¨αƒ
                body: JSON.stringify(loginData),
                // cookiesαƒ›αƒαƒ΅αƒαƒ¦αƒ”αƒ‘αƒαƒ“ αƒαƒ£αƒαƒαƒαƒ”αƒ‘αƒ”αƒαƒαƒ
                credentials: "include"
            });

            // αƒαƒαƒ΅αƒ£αƒ®αƒ΅ αƒ•αƒ—αƒαƒ αƒ’αƒ›αƒαƒαƒ— JSON_αƒ“αƒαƒ αƒ›αƒαƒαƒ¨αƒ•αƒαƒ”αƒαƒαƒ‘αƒαƒ΅ αƒ¤αƒαƒ αƒ›αƒαƒΆαƒ¨αƒ
            const data = await response.json();

            // αƒ•αƒαƒ›αƒαƒ¬αƒ›αƒ”αƒ‘αƒ— αƒαƒαƒ΅αƒ£αƒ®αƒ΅, αƒαƒ§αƒ αƒ—αƒ£ αƒαƒ αƒ αƒ›αƒαƒ—αƒ®αƒαƒ•αƒαƒ αƒ¬αƒαƒ αƒ›αƒαƒΆαƒ”αƒ‘αƒ£αƒαƒ
            if (!response.ok) {
                // αƒ—αƒ£ αƒαƒαƒ΅αƒ£αƒ®αƒ αƒαƒ  αƒαƒ αƒαƒ΅ αƒ¬αƒαƒ αƒ›αƒαƒΆαƒ”αƒ‘αƒ£αƒαƒ, αƒ•αƒ§αƒ αƒαƒ— αƒ¨αƒ”αƒαƒ“αƒαƒ›αƒ
                throw new Error(`αƒαƒ•αƒΆαƒαƒ αƒαƒ–αƒαƒαƒαƒ αƒ¬αƒαƒ αƒ£αƒ›αƒαƒΆαƒ”αƒ‘αƒαƒαƒ“ αƒ“αƒαƒ΅αƒ αƒ£αƒαƒ“αƒ: ${data} ${response.status}`);
            }

            // αƒ¬αƒαƒ αƒ›αƒαƒΆαƒ”αƒ‘αƒαƒΆ αƒ“αƒαƒ΅αƒ αƒ£αƒαƒ”αƒ‘αƒαƒ΅ αƒ¨αƒ”αƒ›αƒΆαƒ®αƒ•αƒ”αƒ•αƒαƒ¨αƒ, αƒ•αƒαƒαƒαƒ­αƒ”αƒ‘αƒΆ αƒ“αƒαƒ‘αƒ αƒ£αƒαƒ”αƒ‘αƒ£αƒ αƒ›αƒαƒαƒαƒαƒ”αƒ›αƒ”αƒ‘αƒ΅ user αƒ’αƒαƒαƒ‘αƒαƒαƒ£αƒ  αƒ›αƒ“αƒ’αƒαƒ›αƒαƒ αƒ”αƒαƒ‘αƒαƒ΅
            setUser(data);

            // αƒ’αƒαƒ“αƒαƒ•αƒαƒ§αƒ•αƒαƒαƒαƒ— αƒαƒ•αƒΆαƒαƒ›αƒαƒΆαƒ£αƒ αƒαƒ“ αƒαƒ αƒαƒ¤αƒαƒαƒ–αƒ”
            navigate("/profile");

            // αƒ¬αƒαƒ αƒ›αƒαƒΆαƒ”αƒ‘αƒαƒ— αƒαƒ•αƒΆαƒαƒ αƒαƒ–αƒαƒαƒαƒαƒ΅ αƒ’αƒαƒ›αƒ αƒ’αƒαƒ›αƒαƒ•αƒ£αƒΆαƒαƒαƒαƒ— αƒ“αƒαƒ“αƒ”αƒ‘αƒαƒΆαƒ αƒ›αƒ”αƒ΅αƒαƒ―αƒ αƒ›αƒαƒ›αƒ®αƒ›αƒαƒ αƒ”αƒ¬αƒ‘αƒ”αƒαƒ΅
            toast.success("αƒαƒ•αƒΆαƒαƒ αƒαƒ–αƒαƒαƒαƒ αƒ¬αƒαƒ αƒ›αƒαƒΆαƒ”αƒ‘αƒαƒ— αƒ“αƒαƒ΅αƒ αƒ£αƒαƒ“αƒ");
        } catch (err) {
            // αƒ¨αƒ”αƒαƒ“αƒαƒ›αƒαƒ΅ αƒ¨αƒ”αƒ›αƒ—αƒ®αƒ•αƒ”αƒ•αƒαƒ¨αƒ αƒ•αƒ‘αƒ”αƒ­αƒ“αƒαƒ•αƒ— αƒ™αƒαƒαƒ΅αƒαƒαƒ¨αƒ αƒαƒαƒ¤αƒαƒ αƒ›αƒαƒαƒαƒαƒ΅
            toast.error(err.message)
        }
    }

    // αƒ•αƒ¥αƒ›αƒαƒαƒ— logout αƒ¤αƒ£αƒαƒ¥αƒαƒαƒαƒ΅, αƒ›αƒαƒ›αƒ®αƒ›αƒαƒ αƒ”αƒ‘αƒ”αƒαƒ΅ αƒ αƒαƒ› αƒ¨αƒ”αƒ”αƒ«αƒαƒαƒ΅ αƒαƒ¥αƒαƒ£αƒαƒ—αƒαƒ“αƒαƒ αƒ’αƒαƒ›αƒαƒ΅αƒ•αƒαƒ
    const logout = async () => {
        try {
            await fetch(`${API_URL}/user/logout`, {
                method: "POST",
                credentials: "include", // αƒαƒ£αƒαƒαƒαƒ”αƒ‘αƒ”αƒαƒαƒ cookie-αƒ΅ αƒ’αƒαƒ΅αƒαƒ’αƒ–αƒαƒ•αƒαƒαƒ“
            });

            setUser(null); // αƒ¬αƒαƒ¨αƒαƒαƒ” user αƒ›αƒαƒαƒαƒαƒ”αƒ›αƒ”αƒ‘αƒ frontend-αƒαƒ“αƒαƒ

            // αƒ¬αƒαƒ αƒ›αƒαƒΆαƒ”αƒ‘αƒαƒ— αƒ’αƒαƒ›αƒαƒ΅αƒ•αƒαƒαƒ΅ αƒ¨αƒ”αƒ›αƒ—αƒ®αƒ•αƒ”αƒ•αƒαƒ¨αƒ αƒ’αƒαƒ›αƒαƒ•αƒαƒΆαƒαƒαƒαƒ— αƒ›αƒ”αƒ΅αƒαƒ―αƒ
            toast.warn("αƒ—αƒ¥αƒ•αƒ”αƒ αƒ’αƒαƒ›αƒαƒ®αƒ•αƒ”αƒ“αƒαƒ— αƒαƒ αƒαƒ¤αƒαƒαƒαƒ“αƒαƒ!");
        } catch (err) {
            toast.error(err.message)
        }
    };

    return (
        <AuthContext.Provider value={{register, login, logout, user, version}}>
            {children}
        </AuthContext.Provider>
    )
}